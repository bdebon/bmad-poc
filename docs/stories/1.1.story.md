# Story 1.1: Project Setup

## Status

Ready for Done

## Story

**As a** developer,
**I want** a TypeScript project properly configured,
**so that** I can start implementing the scraping logic.

## Acceptance Criteria

1. Le projet est initialisé avec `npm init` et TypeScript configuré (`tsconfig.json`)
2. ESLint + Prettier sont configurés pour la qualité du code
3. Structure de dossiers créée : `src/`, `src/scrapers/`, `src/config/`, `src/types/`
4. Un fichier `config.yaml` existe avec les paramètres de base (liste des subreddits, etc.)
5. Un script `npm run dev` permet d'exécuter le code en local
6. Le `.gitignore` exclut `node_modules/`, `.env`, et les fichiers de build
7. Un fichier `.env.example` documente les variables d'environnement requises

## Tasks / Subtasks

- [x] Task 1: Initialiser le projet Node.js (AC: 1)

  - [x] Créer le dossier `tech-watch-tool/` et exécuter `npm init -y`
  - [x] Configurer `package.json` avec les métadonnées du projet

- [x] Task 2: Configurer TypeScript (AC: 1)

  - [x] Installer TypeScript et tsx : `npm install -D typescript tsx @types/node`
  - [x] Créer `tsconfig.json` avec configuration stricte pour Node.js 20

- [x] Task 3: Configurer ESLint + Prettier (AC: 2)

  - [x] Installer ESLint 9 : `npm install -D eslint @eslint/js typescript-eslint`
  - [x] Installer Prettier : `npm install -D prettier eslint-config-prettier eslint-plugin-prettier`
  - [x] Créer `eslint.config.js` (flat config)
  - [x] Créer `prettier.config.js`
  - [x] Ajouter scripts lint dans `package.json`

- [x] Task 4: Créer la structure de dossiers (AC: 3)

  - [x] Créer `src/index.ts` (entry point minimal)
  - [x] Créer `src/config/index.ts` et `src/config/schema.ts`
  - [x] Créer `src/scrapers/index.ts`
  - [x] Créer `src/types/index.ts`
  - [x] Créer `tests/unit/` et `tests/integration/`

- [x] Task 5: Créer config.yaml (AC: 4)

  - [x] Créer `config.yaml` avec structure pour subreddits, limites, notion settings
  - [x] Installer le package yaml : `npm install yaml`
  - [x] Installer zod pour validation : `npm install zod`

- [x] Task 6: Configurer scripts npm (AC: 5)

  - [x] Ajouter script `dev` : `tsx src/index.ts`
  - [x] Ajouter script `lint` : `eslint src/`
  - [x] Ajouter script `format` : `prettier --write .`

- [x] Task 7: Configurer Vitest (AC: lié aux futurs tests)

  - [x] Installer Vitest : `npm install -D vitest`
  - [x] Créer `vitest.config.ts`
  - [x] Ajouter script `test` dans `package.json`

- [x] Task 8: Créer fichiers de configuration git (AC: 6, 7)

  - [x] Créer `.gitignore` avec exclusions requises
  - [x] Créer `.env.example` documentant les variables requises

- [x] Task 9: Valider le setup
  - [x] Exécuter `npm run lint` sans erreurs
  - [x] Exécuter `npm run dev` vérifiant que le projet démarre
  - [x] Exécuter `npm run test` vérifiant que Vitest fonctionne

## Dev Notes

### Tech Stack [Source: architecture/tech-stack.md]

| Technology | Version | Usage                               |
| ---------- | ------- | ----------------------------------- |
| TypeScript | 5.3     | Langage principal                   |
| Node.js    | 20 LTS  | Runtime                             |
| ESLint     | ^9.0    | Linting (flat config)               |
| Prettier   | ^3.2    | Formatting                          |
| Vitest     | ^2.0    | Testing                             |
| tsx        | ^4.7    | Exécution TS directe (pas de build) |
| yaml       | ^2.3    | Parsing config.yaml                 |
| zod        | ^3.22   | Validation des données              |

### Source Tree Structure [Source: architecture/source-tree.md]

```
tech-watch-tool/
├── src/
│   ├── index.ts                  # Pipeline orchestrator (entry point)
│   ├── config/
│   │   ├── index.ts              # Config loader + env validation
│   │   └── schema.ts             # Zod schemas for config validation
│   ├── scrapers/
│   │   └── index.ts              # Barrel export
│   └── types/
│       └── index.ts              # Barrel export
├── tests/
│   ├── unit/
│   └── integration/
├── config.yaml
├── .env.example
├── .gitignore
├── package.json
├── tsconfig.json
├── eslint.config.js              # ESLint flat config
├── prettier.config.js
└── vitest.config.ts
```

### Coding Standards [Source: architecture/coding-standards.md]

- **Naming:** Files en kebab-case, fonctions en camelCase, types en PascalCase
- **No `any`** — utiliser `unknown` si vraiment inconnu
- **Valider données externes avec zod**
- **Secrets uniquement via `process.env`**

### Config Schema [Source: architecture/data-models.md#config]

Le `config.yaml` doit supporter cette structure :

```yaml
sources:
  reddit:
    subreddits: [] # Liste des subreddits
    limit: 25 # Posts par subreddit
  hn:
    limit: 30 # Posts front page HN
filtering:
  minScore: 6 # Score minimum
  maxPosts: 4 # Posts max à publier
notion:
  databaseId: "" # ID Notion database
```

### Environment Variables [Source: architecture/tech-stack.md]

Le `.env.example` doit documenter :

```
BRIGHT_DATA_API_KEY=
ANTHROPIC_API_KEY=
NOTION_API_KEY=
NOTION_DATABASE_ID=
```

## Testing

### Standards [Source: architecture/test-strategy-and-standards.md]

- **Framework:** Vitest 2.0
- **Location:** `tests/unit/*.test.ts`, `tests/integration/*.test.ts`
- **Pattern:** AAA (Arrange, Act, Assert)
- **Cette story:** Pas de tests unitaires requis, uniquement valider que le setup fonctionne

## Change Log

| Date       | Version | Description   | Author         |
| ---------- | ------- | ------------- | -------------- |
| 2025-12-10 | 0.1     | Initial draft | SM Agent (Bob) |

---

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References

None - No issues encountered during implementation.

### Completion Notes List

- All 9 tasks completed successfully
- Project initialized with TypeScript 5.9, ESLint 9 (flat config), Prettier 3.7, Vitest 4.0
- All npm scripts working: `dev`, `lint`, `lint:fix`, `format`, `format:check`, `test`, `test:watch`
- Added sample test file `tests/unit/setup.test.ts` to validate Vitest setup
- Note: npm warns about vite engine requirement (node ^20.19.0 || >=22.12.0) but Vitest works correctly

### File List

- `tech-watch-tool/package.json` - Project configuration with scripts and dependencies
- `tech-watch-tool/tsconfig.json` - TypeScript strict configuration for Node.js 20
- `tech-watch-tool/eslint.config.js` - ESLint 9 flat config with TypeScript and Prettier
- `tech-watch-tool/prettier.config.js` - Prettier formatting configuration
- `tech-watch-tool/vitest.config.ts` - Vitest test runner configuration
- `tech-watch-tool/config.yaml` - Runtime configuration (subreddits, limits, notion)
- `tech-watch-tool/.gitignore` - Git exclusions (node_modules, .env, dist, etc.)
- `tech-watch-tool/.env.example` - Environment variables template
- `tech-watch-tool/src/index.ts` - Pipeline entry point
- `tech-watch-tool/src/config/index.ts` - Config loader barrel export
- `tech-watch-tool/src/config/schema.ts` - Zod schemas barrel export
- `tech-watch-tool/src/scrapers/index.ts` - Scrapers barrel export
- `tech-watch-tool/src/types/index.ts` - Types barrel export
- `tech-watch-tool/tests/unit/setup.test.ts` - Setup validation test
- `tech-watch-tool/tests/unit/.gitkeep` - Placeholder for unit tests
- `tech-watch-tool/tests/integration/.gitkeep` - Placeholder for integration tests

---

## QA Results

### Review Date: 2025-12-10

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Excellent setup implementation. All acceptance criteria are met, and the project foundation is solid. The developer has used more recent package versions than specified (TypeScript 5.9 vs 5.3, Vitest 4.0 vs 2.0), which is acceptable and beneficial. All configuration files follow best practices with strict TypeScript settings and modern ESLint flat config.

### Refactoring Performed

None required - setup code is clean and minimal.

### Compliance Check

- Coding Standards: ✓ Files in kebab-case, TypeScript strict mode enabled, no `any` usage
- Project Structure: ✓ All required directories and files created per source-tree.md
- Testing Strategy: ✓ Vitest configured correctly with proper test location
- All ACs Met: ✓ All 7 acceptance criteria validated

### Improvements Checklist

- [x] All acceptance criteria verified
- [x] ESLint passes without errors
- [x] Vitest tests pass
- [x] `npm run dev` executes successfully
- [ ] Run `npm run format` to fix config.yaml formatting (minor)

### Security Review

No security concerns - this is a setup story with no authentication, API calls, or data handling.

### Performance Considerations

No performance concerns at this stage. Project uses tsx for direct TypeScript execution (no build step), which is appropriate for development.

### Files Modified During Review

None - no modifications were necessary.

### Gate Status

Gate: **PASS** → docs/qa/gates/1.1-project-setup.yml

### Recommended Status

✓ Ready for Done

Minor note: Run `npm run format` to fix Prettier formatting on config.yaml before merging.
